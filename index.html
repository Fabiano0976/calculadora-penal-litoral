<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora Penal Litoral City</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: radial-gradient(circle at top, #111827 0, #020617 45%, #020617 100%);
      color: #e5e7eb;
      min-height: 100vh;
    }

    .page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 32px 16px 40px;
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      margin-bottom: 20px;
    }

    .logo {
      height: 80px;
      width: auto;
    }

    .title-group {
      text-align: center;
    }

    h1 {
      font-size: 26px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #facc15;
    }

    .subtitle {
      margin-top: 4px;
      color: #9ca3af;
      font-size: 13px;
    }

    .card {
      background: rgba(15, 23, 42, 0.96);
      border-radius: 14px;
      border: 1px solid #1f2937;
      padding: 16px 18px;
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.55);
    }

    .layout {
      display: grid;
      grid-template-columns: 1.4fr 1fr;
      gap: 16px;
    }

    h2 {
      font-size: 15px;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    h2::before {
      content: "";
      width: 4px;
      height: 16px;
      border-radius: 999px;
      background: linear-gradient(to bottom, #38bdf8, #2563eb);
    }

    label {
      font-size: 13px;
      color: #e5e7eb;
      display: block;
      margin-bottom: 3px;
    }

    input[type="text"],
    input[type="number"],
    select {
      width: 100%;
      padding: 7px 10px;
      border-radius: 9px;
      border: 1px solid #374151;
      background: #020617;
      color: #e5e7eb;
      outline: none;
      font-size: 13px;
      margin-bottom: 8px;
    }

    input:focus,
    select:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
    }

    .row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-bottom: 8px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border: none;
      border-radius: 999px;
      padding: 8px 18px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(to right, #38bdf8, #2563eb);
      color: #0b1120;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      transition: transform 0.1s, box-shadow 0.1s, filter 0.1s;
    }

    .btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 12px 25px rgba(37, 99, 235, 0.45);
    }

    .btn-outline {
      background: transparent;
      color: #e5e7eb;
      border: 1px solid #4b5563;
      text-transform: none;
      letter-spacing: 0;
    }

    .btn-outline:hover {
      background: #111827;
      box-shadow: 0 12px 25px rgba(15, 23, 42, 0.7);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 4px;
      font-size: 12px;
    }

    th, td {
      padding: 6px 6px;
      text-align: left;
      border-bottom: 1px solid #111827;
    }

    th {
      color: #9ca3af;
      font-weight: 500;
      background: rgba(15, 23, 42, 0.8);
    }

    tbody tr:nth-child(even) {
      background: rgba(15, 23, 42, 0.7);
    }

    .badge-row {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
      margin-top: 8px;
      font-size: 12px;
    }

    .badge {
      background: #020617;
      border-radius: 999px;
      border: 1px solid #1f2937;
      padding: 6px 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: #9ca3af;
    }

    .badge span {
      color: #facc15;
      font-weight: 600;
    }

    .checks {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px 10px;
      font-size: 13px;
      margin-bottom: 12px;
    }

    .checks label {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 0;
      cursor: pointer;
      color: #e5e7eb;
    }

    input[type="checkbox"],
    input[type="radio"] {
      accent-color: #38bdf8;
      width: 15px;
      height: 15px;
    }

    .status-box {
      margin-top: 10px;
      padding: 10px;
      border-radius: 10px;
      background: #020617;
      border: 1px solid #1f2937;
      font-size: 13px;
    }

    .status-label {
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: #9ca3af;
    }

    .status-main {
      margin-top: 2px;
      font-size: 22px;
      font-weight: 700;
      color: #facc15;
    }

    .status-extra {
      margin-top: 4px;
      color: #d1d5db;
      font-size: 12px;
    }

    textarea {
      width: 100%;
      min-height: 160px;
      border-radius: 10px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #e5e7eb;
      padding: 8px 10px;
      font-size: 12px;
      resize: vertical;
      margin-top: 4px;
      white-space: pre;
    }

    .radio-group {
      margin-top: 8px;
      font-size: 13px;
      color: #e5e7eb;
    }

    .radio-group-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: #9ca3af;
      margin-bottom: 4px;
    }

    .radio-options {
      display: grid;
      gap: 4px;
    }

    .footer {
      margin-top: 16px;
      font-size: 11px;
      text-align: center;
      color: #6b7280;
    }

    @media (max-width: 960px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header class="header">
      <img src="https://raw.githubusercontent.com/Fabiano0976/Calculadora_Penal_EUROPARP/main/litoral%20%20logo.png"
           alt="Litoral City Roleplay" class="logo" />
      <div class="title-group">
        <h1>CALCULADORA PENAL LITORAL CITY</h1>
        <p class="subtitle">
          Calcule servi√ßos, multa e fian√ßa com base no C√≥digo Penal da Litoral City e gere texto pronto para o Discord.
        </p>
      </div>
    </header>

    <div class="layout">
      <!-- ESQUERDA: DADOS + ARTIGOS -->
      <div class="card">
        <!-- Dados do detento -->
        <h2>Dados do detento</h2>
        <div class="row">
          <div>
            <label for="inputNome">Nome</label>
            <input id="inputNome" type="text" placeholder="Ex: Wood" />
          </div>
          <div>
            <label for="inputCPF">CPF</label>
            <input id="inputCPF" type="text" placeholder="Ex: 12345" />
          </div>
        </div>

        <!-- Artigos -->
        <h2 style="margin-top: 6px;">Artigos</h2>
        <div class="row">
          <div>
            <label for="inputCodigoArtigo">C√≥digo do artigo</label>
            <input id="inputCodigoArtigo" type="text" placeholder="Ex: 10, 10.1, 23, 36.4..." />
          </div>
          <div>
            <label for="inputObservacao">Observa√ß√£o (opcional)</label>
            <input id="inputObservacao" type="text" placeholder="Ex: local, situa√ß√£o..." />
          </div>
        </div>

        <label for="selectArtigo">Ou selecionar</label>
        <div class="row">
          <select id="selectArtigo">
            <option value="">Selecione um artigo...</option>
          </select>
          <button id="btnAdicionarArtigo" class="btn">Adicionar artigo</button>
        </div>

        <table>
          <thead>
          <tr>
            <th style="width: 50px;">C√≥d.</th>
            <th>Descri√ß√£o</th>
            <th style="width: 70px;">Serv.</th>
            <th style="width: 90px;">Multa</th>
            <th style="width: 90px;">Fian√ßa</th>
            <th style="width: 40px;"></th>
          </tr>
          </thead>
          <tbody id="tabelaArtigos"></tbody>
        </table>

        <div class="badge-row">
          <div class="badge">Servi√ßos:<span id="totalServicos">0</span></div>
          <div class="badge">Multa:<span id="totalMulta">R$ 0</span></div>
          <div class="badge">Fian√ßa:<span id="totalFianca">R$ 0</span></div>
        </div>
      </div>

      <!-- DIREITA: REDU√á√ïES + RESULTADO + DISCORD -->
      <div class="card">
        <!-- Redu√ß√µes -->
        <h2>Redu√ß√µes / Benef√≠cios</h2>
        <div class="checks">
          <label>
            <input type="checkbox" id="chkReuPrimario" />
            R√©u prim√°rio (-30%)
          </label>
          <label>
            <input type="checkbox" id="chkAdvogado" />
            Deten√ß√£o com advogado (-30%)
          </label>
          <label>
            <input type="checkbox" id="chkCooperacao" />
            Coopera√ß√£o / rendi√ß√£o (-10%)
          </label>
          <label>
            <input type="checkbox" id="chkDelacao" />
            Dela√ß√£o premiada (-50%)
          </label>
          <label>
            <input type="checkbox" id="chkReuConfesso" />
            R√©u confesso (-15%)
          </label>
        </div>

        <button id="btnCalcular" class="btn" style="width:100%; margin-bottom: 10px;">
          Calcular pena final
        </button>

        <!-- Resultado num√©rico -->
        <div class="status-box">
          <div class="status-label">Pena de servi√ßos</div>
          <div class="status-main"><span id="penaFinal">0</span> meses</div>
          <div class="status-extra">
            Multa total: <b id="resultadoMulta">R$ 0</b><br />
            Fian√ßa total: <b id="resultadoFianca">R$ 0</b>
          </div>
        </div>

        <!-- Status sugerido -->
        <div class="status-box" style="margin-top:8px;">
          <div class="status-label">Status sugerido</div>
          <div class="status-main" id="statusRP">‚Äî</div>
          <div class="status-extra" id="statusRPDetalhe">
            Adicione artigos e calcule para ver o status (Pris√£o, Pena Parcial, Liberdade ou Multa).
          </div>
        </div>

        <!-- Situa√ß√£o espec√≠fica -->
        <div class="radio-group">
          <div class="radio-group-title">Situa√ß√£o para o texto do Discord</div>
          <div class="radio-options">
            <label>
              <input type="radio" name="situacao" value="Foi encaminhado para o Centro de Deten√ß√£o." />
              Foi encaminhado para o Centro de Deten√ß√£o.
            </label>
            <label>
              <input type="radio" name="situacao" value="Pagou a fian√ßa e foi colocado em liberdade." />
              Pagou a fian√ßa e foi colocado em liberdade.
            </label>
            <label>
              <input type="radio" name="situacao" value="Foi apenas multado, sem cumprimento de pena de servi√ßos." />
              Apenas multado, sem cumprimento de pena de servi√ßos.
            </label>
          </div>
        </div>

        <!-- Resumo para Discord -->
        <h2 style="margin-top: 14px;">Resumo para Discord</h2>
        <textarea id="resumoDiscord" readonly>Calcule a pena para gerar o texto.</textarea>

        <button id="btnCopiar" class="btn" style="margin-top: 8px; width: 160px;">
          Copiar texto
        </button>
        <span id="copiadoMsg" style="font-size:11px; color:#22c55e; margin-left:8px; display:none;">
          Texto copiado!
        </span>
      </div>
    </div>

    <div class="footer">
      Baseado no C√≥digo Penal da Litoral City. Ajuste valores se houver atualiza√ß√£o oficial.
    </div>
  </div>

  <script>
    // =============================
    // TABELA DE ARTIGOS
    // =============================
    // Exemplo: coloque aqui todos os artigos da Litoral City.
    // Formato:
    // "10":   { descricao: "...", servicos: 60, multa: 60000, fianca: 0 },
    // "10.1": { descricao: "...", servicos: 40, multa: 40000, fianca: 0 },
    // etc.
    const artigos = {
      "10":   { descricao: "Homic√≠dio doloso", servicos: 60, multa: 60000, fianca: 0 },
      "10.1": { descricao: "Homic√≠dio culposo", servicos: 40, multa: 40000, fianca: 0 },
      "10.2": { descricao: "Homic√≠dio a oficial", servicos: 60, multa: 50000, fianca: 0 },
      "11":   { descricao: "Tentativa de homic√≠dio", servicos: 40, multa: 35000, fianca: 0 },
      "23":   { descricao: "Roubo", servicos: 30, multa: 8000,  fianca: 20000 },
      "36":   { descricao: "Posse de subst√¢ncias il√≠citas", servicos: 30, multa: 18000, fianca: 40000 },
      "36.1": { descricao: "Posse ilegal de armas (baixo calibre)", servicos: 40, multa: 20000, fianca: 48000 },
      "41":   { descricao: "Corrup√ß√£o passiva", servicos: 40, multa: 30000, fianca: 80000 },
      "54":   { descricao: "Desordem social", servicos: 15, multa: 5000,  fianca: 12000 },
      "61":   { descricao: "Polui√ß√£o sonora", servicos: 10, multa: 6000,  fianca: 12000 },
      // üëâ ADICIONE AQUI o resto dos artigos do seu c√≥digo penal
    };

    const listaArtigos = [];

    // Refer√™ncias de elementos
    const selectArtigo       = document.getElementById("selectArtigo");
    const inputCodigoArtigo  = document.getElementById("inputCodigoArtigo");
    const inputObservacao    = document.getElementById("inputObservacao");
    const tabelaArtigosBody  = document.getElementById("tabelaArtigos");

    const totalServicosSpan  = document.getElementById("totalServicos");
    const totalMultaSpan     = document.getElementById("totalMulta");
    const totalFiancaSpan    = document.getElementById("totalFianca");

    const penaFinalSpan      = document.getElementById("penaFinal");
    const resultadoMultaSpan = document.getElementById("resultadoMulta");
    const resultadoFiancaSpan= document.getElementById("resultadoFianca");
    const statusRPSpan       = document.getElementById("statusRP");
    const statusRPDetalhe    = document.getElementById("statusRPDetalhe");
    const resumoDiscordArea  = document.getElementById("resumoDiscord");

    const chkReuPrimario     = document.getElementById("chkReuPrimario");
    const chkAdvogado        = document.getElementById("chkAdvogado");
    const chkCooperacao      = document.getElementById("chkCooperacao");
    const chkDelacao         = document.getElementById("chkDelacao");
    const chkReuConfesso     = document.getElementById("chkReuConfesso");

    const inputNome          = document.getElementById("inputNome");
    const inputCPF           = document.getElementById("inputCPF");

    const copiadoMsg         = document.getElementById("copiadoMsg");

    // =============================
    // FUN√á√ïES AUXILIARES
    // =============================
    function formatarMoeda(valor) {
      return valor.toLocaleString("pt-BR", {
        style: "currency",
        currency: "BRL",
        minimumFractionDigits: 0
      });
    }

    function atualizarSelectArtigos() {
      Object.entries(artigos).forEach(([codigo, dados]) => {
        const opt = document.createElement("option");
        opt.value = codigo;
        opt.textContent = `${codigo} - ${dados.descricao}`;
        selectArtigo.appendChild(opt);
      });
    }

    function renderTabela() {
      tabelaArtigosBody.innerHTML = "";

      listaArtigos.forEach((item, index) => {
        const tr = document.createElement("tr");

        const tdCod   = document.createElement("td");
        const tdDesc  = document.createElement("td");
        const tdServ  = document.createElement("td");
        const tdMulta = document.createElement("td");
        const tdFianca= document.createElement("td");
        const tdAcao  = document.createElement("td");

        tdCod.textContent   = item.codigo;
        tdDesc.textContent  = item.descricao;
        tdServ.textContent  = item.servicos;
        tdMulta.textContent = formatarMoeda(item.multa);
        tdFianca.textContent= formatarMoeda(item.fianca);

        const btnRemover = document.createElement("button");
        btnRemover.textContent = "X";
        btnRemover.className = "btn btn-outline";
        btnRemover.style.padding = "2px 8px";
        btnRemover.style.fontSize = "11px";
        btnRemover.onclick = () => {
          listaArtigos.splice(index, 1);
          renderTabela();
          atualizarTotais();
        };

        tdAcao.appendChild(btnRemover);

        tr.appendChild(tdCod);
        tr.appendChild(tdDesc);
        tr.appendChild(tdServ);
        tr.appendChild(tdMulta);
        tr.appendChild(tdFianca);
        tr.appendChild(tdAcao);

        tabelaArtigosBody.appendChild(tr);
      });
    }

    function atualizarTotais() {
      const totalServicos = listaArtigos.reduce((s, a) => s + a.servicos, 0);
      const totalMulta    = listaArtigos.reduce((s, a) => s + a.multa, 0);
      const totalFianca   = listaArtigos.reduce((s, a) => s + a.fianca, 0);

      totalServicosSpan.textContent = totalServicos;
      totalMultaSpan.textContent    = formatarMoeda(totalMulta);
      totalFiancaSpan.textContent   = formatarMoeda(totalFianca);
    }

    function adicionarArtigoPorCodigo(codigoBruto) {
      if (!codigoBruto) return;

      const codigo = codigoBruto.trim();
      const dados  = artigos[codigo];

      if (!dados) {
        alert("Artigo n√£o encontrado na tabela. Adicione-o no objeto 'artigos' do script.");
        return;
      }

      let descricaoFinal = dados.descricao;
      const obs = inputObservacao.value.trim();
      if (obs) descricaoFinal += ` (${obs})`;

      listaArtigos.push({
        codigo,
        descricao: descricaoFinal,
        servicos: dados.servicos,
        multa: dados.multa,
        fianca: dados.fianca
      });

      inputCodigoArtigo.value = "";
      inputObservacao.value   = "";
      selectArtigo.value      = "";

      renderTabela();
      atualizarTotais();
    }

    // =============================
    // C√ÅLCULO DA PENA + STATUS
    // =============================
    function calcularPenaFinal() {
      if (listaArtigos.length === 0) {
        alert("Adicione pelo menos um artigo antes de calcular.");
        return;
      }

      const totalServicos = listaArtigos.reduce((s, a) => s + a.servicos, 0);
      const totalMulta    = listaArtigos.reduce((s, a) => s + a.multa, 0);
      const totalFianca   = listaArtigos.reduce((s, a) => s + a.fianca, 0);

      let pena = totalServicos;

      if (chkReuPrimario.checked) pena *= 0.7;   // -30%
      if (chkAdvogado.checked)    pena *= 0.7;   // -30%
      if (chkCooperacao.checked)  pena *= 0.9;   // -10%
      if (chkDelacao.checked)     pena *= 0.5;   // -50%
      if (chkReuConfesso.checked) pena *= 0.85;  // -15%

      pena = Math.round(pena);
      if (pena < 0) pena = 0;

      penaFinalSpan.textContent      = pena;
      resultadoMultaSpan.textContent = formatarMoeda(totalMulta);
      resultadoFiancaSpan.textContent= formatarMoeda(totalFianca);

      // Definir STATUS: PRIS√ÉO / PENA PARCIAL / LIBERDADE / MULTA
      let status, detalhe;

      if (pena === 0 && totalMulta > 0 && totalFianca === 0) {
        status  = "MULTA";
        detalhe = "Sem pena de servi√ßos. Apenas multa aplicada.";
      } else if (totalFianca > 0 && pena <= 20) {
        status  = "LIBERDADE";
        detalhe = "Poss√≠vel liberdade mediante pagamento de fian√ßa.";
      } else if (pena <= 40) {
        status  = "PENA PARCIAL";
        detalhe = "Pena moderada, poss√≠vel acordo ou redu√ß√£o.";
      } else {
        status  = "PRIS√ÉO";
        detalhe = "Cumprimento integral da pena de servi√ßos.";
      }

      statusRPSpan.textContent    = status;
      statusRPDetalhe.textContent = detalhe;

      gerarTextoDiscord({
        status,
        pena,
        totalMulta,
        totalFianca
      });
    }

    // Pega frase da situa√ß√£o (radio selecionado ou default por status)
    function obterSituacao(status) {
      const radios = document.querySelectorAll('input[name="situacao"]');
      let selecionada = "";

      radios.forEach(r => {
        if (r.checked) selecionada = r.value;
      });

      if (selecionada) return selecionada;

      // Default se nada selecionado
      if (status === "PRIS√ÉO" || status === "PENA PARCIAL") {
        return "Foi encaminhado para o Centro de Deten√ß√£o.";
      }
      if (status === "LIBERDADE") {
        return "Pagou a fian√ßa e foi colocado em liberdade.";
      }
      if (status === "MULTA") {
        return "Foi apenas multado, sem cumprimento de pena de servi√ßos.";
      }
      return "";
    }

    // Gera o texto bonito para o Discord
    function gerarTextoDiscord({ status, pena, totalMulta, totalFianca }) {
      const nome = inputNome.value.trim() || "N√£o informado";
      const cpf  = inputCPF.value.trim()  || "N√£o informado";
      const artigosLista = listaArtigos.map(a => a.codigo).join(", ") || "‚Äî";

      const situacao = obterSituacao(status);

      const texto = [
        `**${status}**`,
        situacao ? `> Situa√ß√£o: ${situacao}` : "",
        "------------------------------",
        `Nome: ${nome}`,
        `CPF: ${cpf}`,
        `Artigos: ${artigosLista}`,
        `Pena: ${pena} meses`,
        `Multa: ${formatarMoeda(totalMulta)}`,
        `Fian√ßa: ${formatarMoeda(totalFianca)}`,
        "------------------------------"
      ].filter(l => l !== "").join("\n");

      resumoDiscordArea.value = texto;
    }

    // =============================
    // EVENTOS
    // =============================
    document.getElementById("btnAdicionarArtigo").addEventListener("click", () => {
      const codDigitado = inputCodigoArtigo.value.trim();
      const codSelect   = selectArtigo.value;
      const codigo = codDigitado || codSelect;

      if (!codigo) {
        alert("Informe um c√≥digo ou selecione um artigo.");
        return;
      }

      adicionarArtigoPorCodigo(codigo);
    });

    inputCodigoArtigo.addEventListener("keyup", (e) => {
      if (e.key === "Enter") {
        document.getElementById("btnAdicionarArtigo").click();
      }
    });

    document.getElementById("btnCalcular").addEventListener("click", calcularPenaFinal);

    document.getElementById("btnCopiar").addEventListener("click", () => {
      resumoDiscordArea.select();
      document.execCommand("copy");
      copiadoMsg.style.display = "inline";
      setTimeout(() => copiadoMsg.style.display = "none", 1800);
    });

    // Inicializa√ß√£o
    atualizarSelectArtigos();
  </script>
</body>
</html>
