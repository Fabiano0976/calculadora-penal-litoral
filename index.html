<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora Penal Litoral City</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonte estilo “gamer” parecida com o exemplo -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Teko:wght@400;500;600;700&family=Rajdhani:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #0b1220 0%, #020617 40%, #020617 100%);
      color: #e5e7eb;
      font-family: "Rajdhani", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      padding: 24px 12px;
    }

    .page-wrap {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(15, 23, 42, 0.95);
      border-radius: 18px;
      border: 1px solid #1f2937;
      box-shadow: 0 22px 40px rgba(0, 0, 0, 0.65);
      padding: 24px 24px 28px;
      position: relative;
      overflow: hidden;
    }

    /* brilho azul de fundo */
    .page-wrap::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 10% 0%, rgba(59, 130, 246, 0.10) 0, transparent 50%),
        radial-gradient(circle at 90% 100%, rgba(56, 189, 248, 0.10) 0, transparent 55%);
      opacity: 0.9;
      pointer-events: none;
      z-index: -1;
    }

    /* LOGO */
    .logo-box {
      display: flex;
      justify-content: center;
      margin-bottom: 4px;
    }

    .logo-box img {
      max-width: 220px;
      height: auto;
      filter:
        drop-shadow(0 0 18px rgba(56, 189, 248, 0.8))
        drop-shadow(0 0 6px rgba(15, 23, 42, 0.9));
    }

    .page-title {
      text-align: center;
      margin-bottom: 4px;
    }

    .page-title h1 {
      font-family: "Teko", system-ui, sans-serif;
      font-size: 34px;
      letter-spacing: 0.12em;
      color: #e5e7eb;
    }

    .page-title h1 span {
      color: #38bdf8;
    }

    .subtitle {
      text-align: center;
      font-size: 13px;
      color: #9ca3af;
      margin-bottom: 18px;
    }

    .layout {
      display: grid;
      grid-template-columns: 2.1fr 1.2fr;
      gap: 20px;
    }

    .card {
      background: rgba(15, 23, 42, 0.96);
      border-radius: 14px;
      border: 1px solid #1f2937;
      padding: 14px 16px 16px;
    }

    .card-title {
      font-family: "Teko", system-ui, sans-serif;
      font-size: 18px;
      letter-spacing: 0.08em;
      color: #e5e7eb;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-title::before {
      content: "";
      width: 4px;
      height: 18px;
      border-radius: 999px;
      background: linear-gradient(to bottom, #38bdf8, #3b82f6);
    }

    label {
      font-size: 13px;
      color: #e5e7eb;
      margin-bottom: 2px;
      display: inline-block;
    }

    input[type="text"],
    input[type="number"],
    select {
      width: 100%;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #e5e7eb;
      font-size: 13px;
      outline: none;
      transition: border-color 0.12s, box-shadow 0.12s, background 0.12s;
    }

    input::placeholder,
    select:invalid {
      color: #6b7280;
    }

    input:focus,
    select:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.5);
      background: #020617;
    }

    .row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-bottom: 8px;
    }

    .row-three {
      display: grid;
      grid-template-columns: 1.3fr 1.7fr 0.9fr;
      gap: 8px;
      margin-bottom: 6px;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      font-family: "Rajdhani", system-ui, sans-serif;
      background: linear-gradient(to right, #38bdf8, #3b82f6);
      color: #0b1120;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      transition: transform 0.08s, box-shadow 0.08s, filter 0.08s;
      white-space: nowrap;
    }

    .btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 12px 22px rgba(56, 189, 248, 0.35);
    }

    .btn-sm {
      padding: 5px 11px;
      font-size: 11px;
    }

    .btn-danger {
      background: linear-gradient(to right, #f97373, #ef4444);
      color: #f9fafb;
      box-shadow: none;
    }

    .btn-danger:hover {
      box-shadow: 0 10px 20px rgba(239, 68, 68, 0.5);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 6px;
      font-size: 12px;
    }

    th,
    td {
      padding: 6px 6px;
      text-align: left;
      border-bottom: 1px solid #111827;
    }

    th {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
      background: #020617;
    }

    tbody tr:nth-child(even) {
      background: #020617;
    }

    .totais-line {
      margin-top: 6px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
      font-size: 12px;
    }

    .chip {
      background: #020617;
      border-radius: 999px;
      border: 1px solid #1f2937;
      padding: 5px 9px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 4px;
      color: #9ca3af;
    }

    .chip span {
      color: #38bdf8;
      font-weight: 600;
    }

    .checks {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 6px 12px;
      font-size: 13px;
      margin-top: 4px;
    }

    .checks label {
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .checks input[type="checkbox"] {
      width: 16px;
      height: 16px;
      accent-color: #38bdf8;
    }

    .result-block {
      background: #020617;
      border-radius: 12px;
      border: 1px solid #111827;
      padding: 10px 11px;
      font-size: 13px;
      margin-bottom: 8px;
    }

    .result-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: #6b7280;
      margin-bottom: 2px;
    }

    .result-main {
      font-family: "Teko", system-ui, sans-serif;
      font-size: 24px;
      letter-spacing: 0.12em;
      color: #38bdf8;
    }

    .result-main small {
      font-size: 16px;
      letter-spacing: 0.08em;
      color: #9ca3af;
      margin-left: 4px;
    }

    .result-extra {
      font-size: 12px;
      color: #d1d5db;
      margin-top: 2px;
    }

    .status-text {
      font-size: 14px;
      color: #e5e7eb;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      font-family: "Teko", system-ui, sans-serif;
    }

    .status-desc {
      font-size: 12px;
      color: #cbd5f5;
      margin-top: 4px;
    }

    textarea {
      width: 100%;
      min-height: 170px;
      background: #020617;
      border-radius: 10px;
      border: 1px solid #111827;
      padding: 8px 10px;
      resize: vertical;
      color: #e5e7eb;
      font-size: 12px;
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      outline: none;
    }

    textarea:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.5);
    }

    .discord-actions {
      display: flex;
      justify-content: flex-end;
      margin-top: 6px;
    }

    .footer {
      margin-top: 10px;
      font-size: 11px;
      text-align: center;
      color: #6b7280;
    }

    .footer span {
      color: #38bdf8;
    }

    @media (max-width: 960px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 640px) {
      .row,
      .row-three {
        grid-template-columns: 1fr;
      }

      .page-wrap {
        padding-inline: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="page-wrap">
    <div class="logo-box">
      <!-- A imagem precisa existir no repositório com esse nome -->
      <img src="litoral-logo.png" alt="Litoral City Roleplay" />
    </div>

    <div class="page-title">
      <h1>CALCULADORA PENAL <span>LITORAL CITY</span></h1>
    </div>
    <p class="subtitle">
      Calcule serviços, multa e fiança com base no Código Penal da Litoral City e gere texto pronto para o Discord.
    </p>

    <div class="layout">
      <!-- COLUNA ESQUERDA -->
      <div class="card">
        <div class="card-title">Dados do detento</div>
        <div class="row">
          <div>
            <label for="inputNome">Nome</label>
            <input id="inputNome" type="text" placeholder="Ex: Wood" />
          </div>
          <div>
            <label for="inputCpf">CPF</label>
            <input id="inputCpf" type="text" placeholder="Ex: 12345" />
          </div>
        </div>

        <div class="card-title" style="margin-top: 6px;">Artigos</div>
        <p style="font-size: 12px; color:#9ca3af; margin-bottom:4px;">
          Digite o código (ex: <b>10</b>, <b>10.1</b>, <b>23.2</b>) ou selecione na lista e clique em <b>Adicionar artigo</b>.
        </p>

        <div class="row-three">
          <div>
            <label for="inputCodigo">Código do artigo</label>
            <input id="inputCodigo" type="text" placeholder="Ex: 10, 10.1, 23, 36.4..." />
          </div>
          <div>
            <label for="inputObs">Observação (opcional)</label>
            <input id="inputObs" type="text" placeholder="Ex: local, situação..." />
          </div>
          <div style="display:flex; align-items:flex-end;">
            <button class="btn" id="btnAdicionar">Adicionar artigo</button>
          </div>
        </div>

        <div style="margin-top: 4px;">
          <label for="selectArtigo">Ou selecionar</label>
          <select id="selectArtigo">
            <option value="">Selecione um artigo...</option>
          </select>
        </div>

        <table>
          <thead>
            <tr>
              <th style="width: 46px;">Cód.</th>
              <th>Descrição</th>
              <th style="width: 60px;">Serv.</th>
              <th style="width: 70px;">Multa</th>
              <th style="width: 70px;">Fiança</th>
              <th style="width: 40px;"></th>
            </tr>
          </thead>
          <tbody id="tabelaBody"></tbody>
        </table>

        <div class="totais-line">
          <div class="chip">
            Serviços:
            <span id="totalServicos">0</span>
          </div>
          <div class="chip">
            Multa:
            <span id="totalMulta">R$ 0,00</span>
          </div>
          <div class="chip">
            Fiança:
            <span id="totalFianca">R$ 0,00</span>
          </div>
        </div>
      </div>

      <!-- COLUNA DIREITA -->
      <div class="card">
        <div class="card-title">Reduções / Benefícios</div>
        <div class="checks">
          <label>
            <input type="checkbox" id="chkReuPrimario" />
            Réu primário (-30%)
          </label>
          <label>
            <input type="checkbox" id="chkAdvogado" />
            Detenção com advogado (-30%)
          </label>
          <label>
            <input type="checkbox" id="chkCooperacao" />
            Cooperação / rendição (-10%)
          </label>
          <label>
            <input type="checkbox" id="chkDelacao" />
            Delação premiada (-50%)
          </label>
        </div>

        <div style="margin-top: 10px; margin-bottom: 10px;">
          <button class="btn" style="width: 100%;" id="btnCalcular">Calcular pena final</button>
        </div>

        <div class="result-block">
          <div class="result-label">Pena de serviços</div>
          <div class="result-main">
            <span id="penaFinal">0</span> <small>MESES</small>
          </div>
          <div class="result-extra">
            Multa total: <b id="penaMulta">R$ 0,00</b><br />
            Fiança total: <b id="penaFianca">R$ 0,00</b>
          </div>
        </div>

        <div class="result-block">
          <div class="result-label">Status sugerido</div>
          <div class="status-text" id="statusTitulo">—</div>
          <div class="status-desc" id="statusDescricao">
            Adicione artigos e calcule para ver o status.
          </div>
        </div>

        <div class="result-block">
          <div class="result-label">Resumo para Discord</div>
          <textarea id="resumoDiscord" readonly>Calcule a pena para gerar o texto.</textarea>
          <div class="discord-actions">
            <button class="btn btn-sm" id="btnCopiar">Copiar texto</button>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      Baseado no Código Penal da Litoral City. Ajuste valores se houver atualização oficial. |
      Feito para <span>Litoral City Roleplay</span>.
    </div>
  </div>

  <script>
    // ============================
    // TABELA DE ARTIGOS - LITORAL CITY
    // ============================

    // Formato: "codigo" : { descricao, servicos, multa, fianca }
    const artigos = {
      // --- CRIMES CONTRA A VIDA ---
      "10":   { d: "Homicídio doloso (matar alguém com intenção)", s: 60, m: 60000, f: 0 },
      "10.1": { d: "Homicídio culposo (matar alguém sem intenção)", s: 40, m: 40000, f: 0 },
      "10.2": { d: "Homicídio a oficial", s: 60, m: 50000, f: 0 },
      "10.3": { d: "Latrocínio (roubo seguido de morte)", s: 50, m: 40000, f: 0 },
      "11":   { d: "Tentativa de homicídio", s: 40, m: 35000, f: 0 },
      "11.1": { d: "Tentativa de homicídio a oficial", s: 50, m: 40000, f: 0 },
      "11.2": { d: "Múltiplos homicídios", s: 60, m: 60000, f: 0 },
      "12":   { d: "Sequestro e cárcere privado", s: 40, m: 30000, f: 0 },
      "12.1": { d: "Sequestro a oficial", s: 60, m: 35000, f: 0 },
      "12.2": { d: "Extorsão mediante sequestro", s: 50, m: 40000, f: 0 },

      // --- HONRA ---
      "14":   { d: "Lei de igualdade (artigo informativo)", s: 0,  m: 0,     f: 0 },
      "14.1": { d: "Difamação", s: 15, m: 6000,  f: 14000 },
      "14.2": { d: "Calúnia", s: 15, m: 6000,  f: 14000 },
      "14.3": { d: "Injúria", s: 25, m: 14000, f: 20000 },
      "15":   { d: "Ameaça", s: 20, m: 8000,  f: 16000 },
      "15.1": { d: "Ameaça contra oficial", s: 30, m: 10000, f: 20000 },
      "15.2": { d: "Ameaça com violência", s: 30, m: 10000, f: 20000 },

      // --- INTEGRIDADE FÍSICA E BEM-ESTAR ---
      "17":   { d: "Crueldade animal", s: 20, m: 12000, f: 24000 },
      "18":   { d: "Lesão corporal", s: 20, m: 6000,  f: 14000 },
      "19":   { d: "Omissão de socorro", s: 15, m: 7000,  f: 18000 },
      "20":   { d: "Danos morais", s: 15, m: 5000,  f: 10000 },
      "20.1": { d: "Assédio moral", s: 60, m: 50000, f: 100000 },
      "21":   { d: "Ato obsceno", s: 20, m: 6000,  f: 14000 },
      "21.1": { d: "Atentado ao pudor", s: 60, m: 120000, f: 0 },

      // --- PATRIMÔNIO ---
      "23":   { d: "Roubo", s: 30, m: 8000,  f: 20000 },
      "23.1": { d: "Tentativa de roubo", s: 20, m: 6000,  f: 14000 },
      "23.2": { d: "Furto", s: 10, m: 5000,  f: 12000 },
      "24":   { d: "Assalto à loja", s: 40, m: 15000, f: 32000 },
      "25":   { d: "Assalto a banco", s: 45, m: 20000, f: 44000 },
      "26":   { d: "Assalto à joalheria", s: 50, m: 25000, f: 48000 },
      "27":   { d: "Assalto ao Banco Central", s: 100, m: 50000, f: 120000 },
      "28":   { d: "Roubo a registradora", s: 25, m: 12000, f: 28000 },
      "29":   { d: "Roubo a caixa eletrônico", s: 30, m: 16000, f: 32000 },
      "30":   { d: "Assalto a loja de armas", s: 40, m: 18000, f: 38000 },
      "31":   { d: "Lavagem / ocultação de bens", s: 60, m: 34000, f: 76000 },
      "32":   { d: "Dano ao patrimônio", s: 40, m: 15000, f: 32000 },
      "32.1": { d: "Invasão à propriedade", s: 20, m: 8000,  f: 18000 },
      "33":   { d: "Receptação", s: 30, m: 16000, f: 32000 },
      "34":   { d: "Estelionato", s: 40, m: 12000, f: 38000 },
      "34.1": { d: "Extorsão", s: 30, m: 16000, f: 36000 },
      "34.2": { d: "Evasão financeira", s: 30, m: 15000, f: 34000 },

      // --- TRÁFICO / POSSE ---
      "36":   { d: "Posse de substâncias ilícitas", s: 30, m: 18000, f: 40000 },
      "36.1": { d: "Posse ilegal de armas (baixo calibre)", s: 40, m: 20000, f: 48000 },
      "36.2": { d: "Posse de itens de uso de servidores públicos", s: 40, m: 24000, f: 52000 },
      "36.3": { d: "Posse de dinheiro sujo abaixo de 100.000", s: 20, m: 40000, f: 82000 },
      "36.4": { d: "Posse de dinheiro sujo acima de 100.000", s: 40, m: 80000, f: 180000 },
      "37":   { d: "Tráfico de órgãos", s: 40, m: 70000, f: 140000 },
      "38":   { d: "Tráfico de armas e munições", s: 50, m: 70000, f: 160000 },
      "38.1": { d: "Posse de equipamento balístico", s: 40, m: 26000, f: 56000 },
      "39":   { d: "Tráfico de armas médio/alto calibre", s: 60, m: 90000, f: 180000 },
      "40":   { d: "Dinheiro sujo abaixo de 40.000", s: 30, m: 20000, f: 62000 },

      // --- ADMINISTRAÇÃO PÚBLICA ---
      "41":   { d: "Corrupção passiva", s: 40, m: 30000, f: 80000 },
      "41.1": { d: "Corrupção de autoridade", s: 50, m: 100000, f: 220000 },
      "42":   { d: "Corrupção ativa", s: 60, m: 60000, f: 140000 },
      "42.1": { d: "Tentativa de suborno", s: 30, m: 30000, f: 84000 },
      "43":   { d: "Obstrução de justiça", s: 40, m: 60000, f: 128000 },
      "43.1": { d: "Omissão ou obstrução de provas", s: 30, m: 30000, f: 64000 },
      "44":   { d: "Prevaricação", s: 60, m: 80000, f: 160000 },
      "44.1": { d: "Abuso de autoridade", s: 20, m: 24000, f: 56000 },
      "45":   { d: "Usurpação de função pública", s: 60, m: 60000, f: 120000 },
      "46":   { d: "Abolição do estado democrático de direito", s: 60, m: 50000, f: 120000 },
      "47":   { d: "Associação criminosa", s: 40, m: 18000, f: 40000 },
      "48":   { d: "Falsidade ideológica", s: 20, m: 6000,  f: 18000 },
      "49":   { d: "Impossibilidade de identificação", s: 10, m: 6000,  f: 12000 },
      "50":   { d: "Falso testemunho (perjúrio)", s: 40, m: 40000, f: 86000 },
      "51":   { d: "Lei de propriedade industrial", s: 60, m: 80000, f: 150000 },
      "51.1": { d: "Empresa irregular", s: 70, m: 50000, f: 100000 },
      "51.2": { d: "Crime contra relações de consumo", s: 30, m: 54000, f: 120000 },
      "52":   { d: "Venda ilegal de produtos restritos", s: 25, m: 40000, f: 90000 },
      "53":   { d: "Favorecimento pessoal", s: 40, m: 30000, f: 90000 },

      // --- ORDEM PÚBLICA ---
      "54":   { d: "Desordem social", s: 15, m: 5000,  f: 12000 },
      "54.1": { d: "Apologia ao crime", s: 30, m: 50000, f: 110000 },
      "55":   { d: "Desacato", s: 20, m: 12000, f: 26000 },
      "56":   { d: "Desobediência", s: 15, m: 10000, f: 22000 },
      "57":   { d: "Resistência à prisão", s: 20, m: 5000,  f: 15000 },
      "58":   { d: "Fuga de pessoa presa", s: 20, m: 16000, f: 38000 },
      "58.1": { d: "Fuga de abordagem policial", s: 20, m: 8000,  f: 20000 },
      "59":   { d: "Ocultação facial", s: 10, m: 8000,  f: 18000 },
      "60":   { d: "Multas pendentes acima de 50.000", s: 30, m: 8000,  f: 100000 },
      "61":   { d: "Poluição sonora", s: 10, m: 6000,  f: 12000 },
      "62":   { d: "Não respeitar perímetro da ação", s: 10, m: 20000, f: 12000 },
      "63":   { d: "Excesso de ficha criminal", s: 60, m: 10000, f: 15000 },

      // --- TRÂNSITO ---
      "66":   { d: "Excesso de velocidade", s: 0,  m: 8000,  f: 0 },
      "67":   { d: "Atropelamento", s: 10, m: 5000,  f: 15000 },
      "68":   { d: "Direção perigosa", s: 10, m: 5000,  f: 15000 },
      "68.1": { d: "Corrida ilegal", s: 20, m: 14000, f: 34000 },
      "69":   { d: "Veículo em local proibido", s: 0,  m: 4000,  f: 0 },
      "70":   { d: "Veículo abandonado", s: 0,  m: 5000,  f: 0 },
      "71":   { d: "Veículo danificado", s: 0,  m: 3000,  f: 0 },
      "72":   { d: "Uso de veículo de terceiros para crimes", s: 30, m: 30000, f: 68000 },
      "73":   { d: "Tráfego aéreo irregular", s: 50, m: 30000, f: 80000 },
      "73.1": { d: "Pouso em local indevido", s: 10, m: 40000, f: 0 },
      "73.2": { d: "Pilotagem perigosa", s: 10, m: 50000, f: 0 }
    };

    const selectArtigo = document.getElementById("selectArtigo");
    const inputCodigo = document.getElementById("inputCodigo");
    const inputObs = document.getElementById("inputObs");
    const tabelaBody = document.getElementById("tabelaBody");

    const totalServicosSpan = document.getElementById("totalServicos");
    const totalMultaSpan = document.getElementById("totalMulta");
    const totalFiancaSpan = document.getElementById("totalFianca");

    const penaFinalSpan = document.getElementById("penaFinal");
    const penaMultaSpan = document.getElementById("penaMulta");
    const penaFiancaSpan = document.getElementById("penaFianca");
    const statusTitulo = document.getElementById("statusTitulo");
    const statusDescricao = document.getElementById("statusDescricao");
    const resumoDiscord = document.getElementById("resumoDiscord");

    const chkReuPrimario = document.getElementById("chkReuPrimario");
    const chkAdvogado = document.getElementById("chkAdvogado");
    const chkCooperacao = document.getElementById("chkCooperacao");
    const chkDelacao = document.getElementById("chkDelacao");

    const inputNome = document.getElementById("inputNome");
    const inputCpf = document.getElementById("inputCpf");

    const btnAdicionar = document.getElementById("btnAdicionar");
    const btnCalcular = document.getElementById("btnCalcular");
    const btnCopiar = document.getElementById("btnCopiar");

    let lista = [];

    function formatarMoeda(valor) {
      return valor.toLocaleString("pt-BR", {
        style: "currency",
        currency: "BRL"
      });
    }

    function carregarSelect() {
      const ordenados = Object.keys(artigos).sort((a, b) => {
        const na = parseFloat(a);
        const nb = parseFloat(b);
        return na - nb || a.localeCompare(b);
      });

      for (const codigo of ordenados) {
        const art = artigos[codigo];
        const opt = document.createElement("option");
        opt.value = codigo;
        opt.textContent = `Art. ${codigo} - ${art.d}`;
        selectArtigo.appendChild(opt);
      }
    }

    function renderTabela() {
      tabelaBody.innerHTML = "";

      lista.forEach((item, index) => {
        const tr = document.createElement("tr");

        const tdCod = document.createElement("td");
        tdCod.textContent = item.codigo;
        tr.appendChild(tdCod);

        const tdDesc = document.createElement("td");
        tdDesc.textContent = item.descricao;
        tr.appendChild(tdDesc);

        const tdServ = document.createElement("td");
        tdServ.textContent = item.servicos;
        tr.appendChild(tdServ);

        const tdMulta = document.createElement("td");
        tdMulta.textContent = formatarMoeda(item.multa);
        tr.appendChild(tdMulta);

        const tdFianca = document.createElement("td");
        tdFianca.textContent = formatarMoeda(item.fianca);
        tr.appendChild(tdFianca);

        const tdAcao = document.createElement("td");
        const b = document.createElement("button");
        b.textContent = "X";
        b.className = "btn btn-sm btn-danger";
        b.onclick = () => {
          lista.splice(index, 1);
          atualizarTotais();
          renderTabela();
        };
        tdAcao.appendChild(b);
        tr.appendChild(tdAcao);

        tabelaBody.appendChild(tr);
      });
    }

    function atualizarTotais() {
      const totalServ = lista.reduce((s, a) => s + a.servicos, 0);
      const totalMulta = lista.reduce((s, a) => s + a.multa, 0);
      const totalFianca = lista.reduce((s, a) => s + a.fianca, 0);

      totalServicosSpan.textContent = totalServ;
      totalMultaSpan.textContent = formatarMoeda(totalMulta);
      totalFiancaSpan.textContent = formatarMoeda(totalFianca);
    }

    function adicionarArtigo(codigoEntrada) {
      const codigo = String(codigoEntrada).trim();
      if (!codigo) return;

      const art = artigos[codigo];
      if (!art) {
        alert("Artigo não encontrado no Código Penal da Litoral City.");
        return;
      }

      let desc = art.d;
      const obs = inputObs.value.trim();
      if (obs) desc += " (" + obs + ")";

      lista.push({
        codigo,
        descricao: desc,
        servicos: art.s,
        multa: art.m,
        fianca: art.f
      });

      inputCodigo.value = "";
      inputObs.value = "";
      selectArtigo.value = "";

      atualizarTotais();
      renderTabela();
    }

    function calcular() {
      if (lista.length === 0) {
        alert("Adicione pelo menos um artigo antes de calcular.");
        return;
      }

      let totalServ = lista.reduce((s, a) => s + a.servicos, 0);
      const totalMulta = lista.reduce((s, a) => s + a.multa, 0);
      const totalFianca = lista.reduce((s, a) => s + a.fianca, 0);

      if (chkReuPrimario.checked) totalServ *= 0.7;
      if (chkAdvogado.checked) totalServ *= 0.7;
      if (chkCooperacao.checked) totalServ *= 0.9;
      if (chkDelacao.checked) totalServ *= 0.5;

      totalServ = Math.round(totalServ);
      if (totalServ < 0) totalServ = 0;

      penaFinalSpan.textContent = totalServ;
      penaMultaSpan.textContent = formatarMoeda(totalMulta);
      penaFiancaSpan.textContent = formatarMoeda(totalFianca);

      let tipo;
      let detalhe;

      if (totalServ === 0 && totalFianca > 0) {
        tipo = "***LIBERDADE***";
        detalhe = "Indivíduo segue em liberdade mediante pagamento total da fiança.";
      } else if (totalServ > 0 && totalServ <= 25) {
        tipo = "***PENA PARCIAL***";
        detalhe = "Pena moderada. possível acordo ou regime mais brando, conforme RP.";
      } else {
        tipo = "***PRISÃO***";
        detalhe = "Indivíduo segue preso para cumprimento integral da pena.";
      }

      statusTitulo.textContent = tipo.replace(/\*/g, "");
      statusDescricao.textContent = detalhe;

      const nome = inputNome.value.trim() || "Não informado";
      const cpf = inputCpf.value.trim() || "Não informado";
      const artigosLista = lista.map(a => a.codigo).join(", ");

      let resumo = "";
      resumo += tipo + "\n";
      resumo += detalhe + "\n\n";
      resumo += "Nome: " + nome + "\n";
      resumo += "CPF: " + cpf + "\n";
      resumo += "Artigos: " + artigosLista + "\n";
      resumo += "Pena: " + totalServ + " meses\n";
      resumo += "Multa: " + formatarMoeda(totalMulta) + "\n";
      resumo += "Fiança: " + formatarMoeda(totalFianca) + "***";

      resumoDiscord.value = resumo;
    }

    btnAdicionar.addEventListener("click", () => {
      const codInput = inputCodigo.value.trim();
      const codSelect = selectArtigo.value;
      const codigo = codInput || codSelect;
      if (!codigo) {
        alert("Digite um código de artigo ou selecione na lista.");
        return;
      }
      adicionarArtigo(codigo);
    });

    inputCodigo.addEventListener("keyup", (e) => {
      if (e.key === "Enter") {
        btnAdicionar.click();
      }
    });

    btnCalcular.addEventListener("click", calcular);

    btnCopiar.addEventListener("click", () => {
      resumoDiscord.select();
      document.execCommand("copy");
      btnCopiar.textContent = "Copiado!";
      setTimeout(() => (btnCopiar.textContent = "Copiar texto"), 1200);
    });

    carregarSelect();
  </script>
</body>
</html>
