<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora Penal Litoral City</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: #020617;
      color: #e5e7eb;
      padding: 20px;
    }

    .page {
      max-width: 1200px;
      margin: 0 auto;
      background: #020617;
      border-radius: 18px;
      padding: 24px 28px 28px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.45);
      border: 1px solid #1f2937;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      margin-bottom: 18px;
    }

    header img {
      height: 64px;
      width: auto;
      object-fit: contain;
    }

    header h1 {
      font-size: 26px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #facc15;
      text-align: center;
    }

    header p {
      font-size: 12px;
      color: #9ca3af;
      text-align: center;
      margin-top: 4px;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 18px;
    }

    .card {
      background: #020617;
      border: 1px solid #1f2937;
      border-radius: 12px;
      padding: 14px 16px 16px;
    }

    .card-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #9ca3af;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card-title::before {
      content: "";
      display: inline-block;
      width: 4px;
      height: 16px;
      border-radius: 999px;
      background: linear-gradient(180deg, #22d3ee, #3b82f6);
    }

    label {
      font-size: 13px;
      color: #e5e7eb;
      display: block;
      margin-bottom: 4px;
    }

    input[type="text"],
    input[type="number"],
    select {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #e5e7eb;
      font-size: 13px;
      outline: none;
    }

    input:focus,
    select:focus {
      border-color: #3b82f6;
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.4);
    }

    .field-row {
      display: grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 10px;
      margin-bottom: 10px;
    }

    .field-row-single {
      margin-bottom: 10px;
    }

    .btn {
      border: none;
      cursor: pointer;
      border-radius: 999px;
      padding: 8px 18px;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      background: linear-gradient(90deg, #3b82f6, #06b6d4);
      color: #0b1120;
      transition: transform 0.12s, box-shadow 0.12s, filter 0.12s;
      white-space: nowrap;
    }

    .btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 12px 25px rgba(37, 99, 235, 0.4);
    }

    .btn-secondary {
      background: #0f172a;
      color: #e5e7eb;
      border: 1px solid #1f2937;
      box-shadow: none;
    }

    .btn-secondary:hover {
      background: #111827;
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.7);
    }

    .btn-status-group {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 6px;
      margin-bottom: 8px;
    }

    .btn-status {
      font-size: 12px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #e5e7eb;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      transition: background 0.1s, color 0.1s, border-color 0.1s, transform 0.1s;
    }

    .btn-status:hover {
      transform: translateY(-1px);
      background: #0f172a;
    }

    .btn-status.active {
      background: #facc15;
      color: #111827;
      border-color: #facc15;
    }

    .articles-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 8px;
      font-size: 12px;
    }

    .articles-table th,
    .articles-table td {
      padding: 6px 6px;
      border-bottom: 1px solid #111827;
    }

    .articles-table th {
      text-align: left;
      font-weight: 600;
      color: #9ca3af;
      background: #020617;
      position: sticky;
      top: 0;
      z-index: 1;
    }

    .articles-table tbody tr:nth-child(even) {
      background: #020617;
    }

    .total-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    .badge {
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      border: 1px solid #1f2937;
      background: #020617;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .badge span {
      color: #facc15;
      font-weight: 600;
    }

    .checks {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4px 10px;
      font-size: 12px;
      margin-bottom: 8px;
    }

    .checks label {
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      color: #e5e7eb;
    }

    .checks input[type="checkbox"] {
      width: 15px;
      height: 15px;
      accent-color: #3b82f6;
    }

    .right-card-block {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .result-block {
      background: #020617;
      border-radius: 10px;
      border: 1px solid #1f2937;
      padding: 8px 10px;
      font-size: 12px;
    }

    .result-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #9ca3af;
      margin-bottom: 3px;
    }

    .result-main {
      font-size: 20px;
      font-weight: 700;
      color: #facc15;
    }

    .result-sub {
      font-size: 12px;
      color: #e5e7eb;
      margin-top: 2px;
    }

    textarea {
      width: 100%;
      min-height: 150px;
      background: #020617;
      border-radius: 10px;
      border: 1px solid #1f2937;
      color: #e5e7eb;
      font-size: 12px;
      padding: 8px 10px;
      resize: vertical;
      outline: none;
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco,
        Consolas, "Liberation Mono", "Courier New", monospace;
    }

    textarea:focus {
      border-color: #3b82f6;
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.4);
    }

    .footer {
      margin-top: 10px;
      font-size: 11px;
      color: #6b7280;
      text-align: center;
    }

    /* CRIME GRID */

    .crime-sections {
      margin-top: 10px;
      border-top: 1px solid #111827;
      padding-top: 10px;
      max-height: 330px;
      overflow-y: auto;
    }

    .crime-section {
      margin-bottom: 10px;
    }

    .crime-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: #9ca3af;
      margin-bottom: 6px;
    }

    .crime-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
      gap: 6px;
    }

    .crime-card {
      border-radius: 10px;
      padding: 6px 8px;
      border: none;
      cursor: pointer;
      font-size: 11px;
      text-align: left;
      color: #f9fafb;
      background: #1d4ed8;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.55);
      transition: transform 0.12s, box-shadow 0.12s, filter 0.12s, outline 0.12s;
    }

    .crime-card:hover {
      transform: translateY(-2px);
      filter: brightness(1.05);
      box-shadow: 0 12px 24px rgba(15, 23, 42, 0.7);
    }

    .crime-card:active {
      transform: translateY(0px) scale(0.99);
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.7);
    }

    .crime-card small {
      display: block;
      font-size: 10px;
      opacity: 0.9;
      margin-top: 2px;
    }

    .crime-card .crime-artigo {
      font-weight: 700;
      margin-bottom: 2px;
    }

    .crime-card.crime-media {
      background: #facc15;
      color: #111827;
    }

    .crime-card.crime-grave {
      background: #f97316;
      color: #111827;
    }

    .crime-card.crime-gravissimo {
      background: #ef4444;
      color: #f9fafb;
    }

   @media (max-width: 980px) {
  .layout {
    grid-template-columns: 1fr;
  }
  header {
    flex-direction: column;
  }
  header img {
    height: 52px;
  }
}

/* Layout para PC — bem mais largo */
.wrapper {
  max-width: 1700px;
  width: 100%;
  margin: 0 auto;
  padding: 32px 48px;
}

@media (max-width: 1024px) {
  /* No celular / telas menores continua ajustando certinho */
  .wrapper {
    max-width: 100%;
    padding: 16px;
  }
}
  </style>
</head>
<body>
  <div class="page">
    <header>
      <!-- Se quiser usar a logo, suba um arquivo "logo.png" no repositório -->
      <img src="logo.png" alt="Litoral City Logo" onerror="this.style.display='none'">
      <div>
        <h1>CALCULADORA PENAL LITORAL CITY</h1>
        <p>Calcule serviços, multa e fiança com base no Código Penal da Litoral City e gere texto pronto para o Discord.</p>
      </div>
    </header>

    <div class="layout">
      <!-- ESQUERDA -->
      <div class="card">
        <div class="card-title">Dados do detento</div>
        <div class="field-row">
          <div>
            <label for="nomeDetento">Nome</label>
            <input id="nomeDetento" type="text" placeholder="Ex: Wood" />
          </div>
          <div>
            <label for="cpfDetento">CPF</label>
            <input id="cpfDetento" type="text" placeholder="Ex: 12345" />
          </div>
        </div>

        <div class="card-title" style="margin-top:8px;">Artigos</div>

        <div class="field-row-single">
          <label for="codigoInput">
            Código do artigo (ex: <b>10</b>, <b>10.1</b>, <b>23</b>, separados por vírgula)
          </label>
          <input
            id="codigoInput"
            type="text"
            placeholder="Ex: 10, 10.1, 23, 36.4..."
          />
        </div>

        <div class="field-row-single">
          <label for="obsInput">Observação (opcional)</label>
          <input
            id="obsInput"
            type="text"
            placeholder="Ex: local, situação..."
          />
        </div>

        <div style="display:flex; justify-content:flex-end; margin-bottom:6px;">
          <button id="btnAdicionarManual" class="btn">
            Adicionar artigo
          </button>
        </div>

        <!-- GRID DE CRIMES -->
        <div class="crime-sections" id="crimeSections">
          <!-- Preenchido via JS -->
        </div>

        <!-- TABELA -->
        <div style="margin-top:10px; max-height:190px; overflow-y:auto;">
          <table class="articles-table">
            <thead>
              <tr>
                <th style="width:55px;">Cód.</th>
                <th>Descrição</th>
                <th style="width:52px;">Serv.</th>
                <th style="width:90px;">Multa</th>
                <th style="width:90px;">Fiança</th>
                <th style="width:50px;"></th>
              </tr>
            </thead>
            <tbody id="tabelaBody"></tbody>
          </table>
        </div>

        <div class="total-row">
          <div class="badge">Serviços: <span id="totalServicos">0</span></div>
          <div class="badge">Multa total: <span id="totalMulta">R$ 0</span></div>
          <div class="badge">Fiança total: <span id="totalFianca">R$ 0</span></div>
        </div>
      </div>

      <!-- DIREITA -->
      <div class="card right-card-block">
        <div>
          <div class="card-title">Reduções / Benefícios</div>
          <div class="checks">
            <label>
              <input type="checkbox" id="chkReuPrimario" />
              Réu primário (-30%)
            </label>
            <label>
              <input type="checkbox" id="chkAdvogado" />
              Detenção com advogado (-30%)
            </label>
            <label>
              <input type="checkbox" id="chkCooperacao" />
              Cooperação / rendição (-10%)
            </label>
            <label>
              <input type="checkbox" id="chkDelacao" />
              Delação premiada (-50%)
            </label>
            <label>
              <input type="checkbox" id="chkConfesso" />
              Réu confesso (-15%)
            </label>
          </div>
          <button id="btnCalcular" class="btn" style="width:100%; margin-top:4px;">
            Calcular pena final
          </button>
        </div>

        <div class="result-block">
          <div class="result-label">Pena de serviços</div>
          <div class="result-main"><span id="penaFinal">0</span> meses</div>
          <div class="result-sub">
            Multa total: <b id="resMulta">R$ 0</b> • Fiança total:
            <b id="resFianca">R$ 0</b>
          </div>
        </div>

        <div class="result-block">
          <div class="result-label">Status sugerido</div>
          <div class="result-sub" id="statusTexto">
            Adicione artigos e calcule para ver o status.
          </div>
        </div>

        <div class="result-block">
          <div class="result-label">Situação para Discord</div>
          <div class="btn-status-group">
            <button class="btn-status active" data-status="PRISÃO">Prisão</button>
            <button class="btn-status" data-status="PENA PARCIAL">Pena parcial</button>
            <button class="btn-status" data-status="LIBERDADE">Liberdade</button>
            <button class="btn-status" data-status="MULTAR">Multar</button>
          </div>

          <label for="situacaoSelect" style="margin-top:4px; font-size:12px;">
            Situação (usada no texto do Discord)
          </label>
          <select id="situacaoSelect">
            <option value="Situação não informada.">
              Situação não informada.
            </option>
            <option value="Foi encaminhado para o Centro de Detenção.">
              Foi encaminhado para o Centro de Detenção.
            </option>
            <option value="Pagou a fiança e foi liberado.">
              Pagou a fiança e foi liberado.
            </option>
            <option value="Foi liberado após termo / audiência.">
              Foi liberado após termo / audiência.
            </option>
          </select>
        </div>

        <div class="result-block" style="flex:1; min-height:0;">
          <div class="result-label">Resumo para Discord</div>
          <textarea id="textoDiscord"></textarea>
          <div style="display:flex; justify-content:flex-end; margin-top:6px;">
            <button id="btnCopiar" class="btn">
              Copiar texto
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      Baseado no Código Penal da Litoral City. Ajuste valores se houver atualização
      oficial.
    </div>
  </div>

  <script>
    // =============================
    // TABELA DE CRIMES (Litoral City)
    // =============================

    const CRIMES = [
      // --- CRIMES CONTRA A VIDA ---
      { codigo: "10",   nome: "Homicídio doloso (matar alguém com intenção)",            meses: 60, multa: 60000,  fianca: 0,      grupo: "Crimes contra a vida" },
      { codigo: "10.1", nome: "Homicídio culposo (sem intenção)",                        meses: 40, multa: 40000,  fianca: 0,      grupo: "Crimes contra a vida" },
      { codigo: "10.2", nome: "Homicídio a oficial",                                     meses: 60, multa: 50000,  fianca: 0,      grupo: "Crimes contra a vida" },
      { codigo: "10.3", nome: "Latrocínio (roubo seguido de morte)",                     meses: 50, multa: 40000,  fianca: 0,      grupo: "Crimes contra a vida" },
      { codigo: "11",   nome: "Tentativa de homicídio",                                  meses: 40, multa: 35000,  fianca: 0,      grupo: "Crimes contra a vida" },
      { codigo: "11.1", nome: "Tentativa contra oficial",                                meses: 50, multa: 40000,  fianca: 0,      grupo: "Crimes contra a vida" },
      { codigo: "11.2", nome: "Múltiplos homicídios",                                    meses: 60, multa: 60000,  fianca: 0,      grupo: "Crimes contra a vida" },
      { codigo: "12",   nome: "Sequestro e cárcere privado",                             meses: 40, multa: 30000,  fianca: 0,      grupo: "Crimes contra a vida" },
      { codigo: "12.1", nome: "Sequestro a oficial",                                     meses: 60, multa: 35000,  fianca: 0,      grupo: "Crimes contra a vida" },
      { codigo: "12.2", nome: "Extorsão mediante sequestro",                             meses: 50, multa: 40000,  fianca: 0,      grupo: "Crimes contra a vida" },

      // --- CRIMES CONTRA A HONRA ---
      { codigo: "14.1", nome: "Difamação",                                               meses: 15, multa: 6000,   fianca: 14000,  grupo: "Crimes contra a honra" },
      { codigo: "14.2", nome: "Calúnia",                                                 meses: 15, multa: 6000,   fianca: 14000,  grupo: "Crimes contra a honra" },
      { codigo: "14.3", nome: "Injúria",                                                 meses: 25, multa: 14000,  fianca: 20000,  grupo: "Crimes contra a honra" },
      { codigo: "15",   nome: "Ameaça",                                                  meses: 20, multa: 8000,   fianca: 16000,  grupo: "Crimes contra a honra" },
      { codigo: "15.1", nome: "Ameaça contra oficial",                                   meses: 30, multa: 10000,  fianca: 20000,  grupo: "Crimes contra a honra" },
      { codigo: "15.2", nome: "Ameaça com violência",                                   meses: 30, multa: 10000,  fianca: 20000,  grupo: "Crimes contra a honra" },

      // --- INTEGRIDADE FÍSICA / BEM-ESTAR ---
      { codigo: "17",   nome: "Crueldade animal",                                       meses: 20, multa: 12000,  fianca: 24000,  grupo: "Integridade física e bem-estar" },
      { codigo: "18",   nome: "Lesão corporal",                                         meses: 20, multa: 6000,   fianca: 14000,  grupo: "Integridade física e bem-estar" },
      { codigo: "19",   nome: "Omissão de socorro",                                     meses: 15, multa: 7000,   fianca: 18000,  grupo: "Integridade física e bem-estar" },
      { codigo: "20",   nome: "Danos morais / imagem",                                  meses: 15, multa: 5000,   fianca: 10000,  grupo: "Integridade física e bem-estar" },
      { codigo: "20.1", nome: "Assédio moral",                                          meses: 60, multa: 50000,  fianca: 100000, grupo: "Integridade física e bem-estar" },
      { codigo: "21",   nome: "Ato obsceno",                                            meses: 20, multa: 6000,   fianca: 14000,  grupo: "Integridade física e bem-estar" },
      { codigo: "21.1", nome: "Atentado ao pudor",                                      meses: 60, multa: 120000, fianca: 0,      grupo: "Integridade física e bem-estar" },

      // --- CRIMES CONTRA O PATRIMÔNIO ---
      { codigo: "23",   nome: "Roubo",                                                  meses: 30, multa: 8000,   fianca: 20000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "23.1", nome: "Tentativa de roubo",                                    meses: 20, multa: 6000,   fianca: 14000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "23.2", nome: "Furto",                                                  meses: 10, multa: 5000,   fianca: 12000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "24",   nome: "Assalto à loja",                                         meses: 40, multa: 15000,  fianca: 32000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "25",   nome: "Assalto a banco (pequeno porte)",                       meses: 45, multa: 20000,  fianca: 44000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "26",   nome: "Assalto à joalheria",                                   meses: 50, multa: 25000,  fianca: 48000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "27",   nome: "Assalto ao Banco Central",                             meses: 100,multa: 50000,  fianca: 120000, grupo: "Crimes contra o patrimônio" },
      { codigo: "28",   nome: "Roubo a registradora",                                  meses: 25, multa: 12000,  fianca: 28000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "29",   nome: "Roubo a caixa eletrônico",                              meses: 30, multa: 16000,  fianca: 32000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "30",   nome: "Assalto a loja de armas",                               meses: 40, multa: 18000,  fianca: 38000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "31",   nome: "Lavagem / ocultação de bens, direitos e valores",       meses: 60, multa: 34000,  fianca: 76000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "32",   nome: "Dano ao patrimônio",                                    meses: 40, multa: 15000,  fianca: 32000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "32.1", nome: "Invasão à propriedade",                                 meses: 20, multa: 8000,   fianca: 18000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "33",   nome: "Receptação",                                            meses: 30, multa: 16000,  fianca: 32000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "34",   nome: "Estelionato",                                           meses: 40, multa: 12000,  fianca: 38000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "34.1", nome: "Extorsão",                                              meses: 30, multa: 16000,  fianca: 36000,  grupo: "Crimes contra o patrimônio" },
      { codigo: "34.2", nome: "Evasão financeira",                                     meses: 30, multa: 15000,  fianca: 34000,  grupo: "Crimes contra o patrimônio" },

      // --- TRÁFICO / POSSE ILEGAL ---
      { codigo: "36",   nome: "Posse de substâncias ilícitas",                         meses: 30, multa: 18000,  fianca: 40000,  grupo: "Tráfico e posse ilegal" },
      { codigo: "36.1", nome: "Posse ilegal de armas (baixo calibre)",                 meses: 40, multa: 20000,  fianca: 48000,  grupo: "Tráfico e posse ilegal" },
      { codigo: "36.2", nome: "Posse de itens de uso de servidores públicos",          meses: 40, multa: 24000,  fianca: 52000,  grupo: "Tráfico e posse ilegal" },
      { codigo: "36.3", nome: "Posse de dinheiro sujo abaixo de 100.000",             meses: 20, multa: 40000,  fianca: 82000,  grupo: "Tráfico e posse ilegal" },
      { codigo: "36.4", nome: "Posse de dinheiro sujo acima de 100.000",              meses: 40, multa: 80000,  fianca: 180000, grupo: "Tráfico e posse ilegal" },
      { codigo: "37",   nome: "Tráfico de órgãos",                                     meses: 40, multa: 70000,  fianca: 140000, grupo: "Tráfico e posse ilegal" },
      { codigo: "38",   nome: "Tráfico de armas e munições",                           meses: 50, multa: 70000,  fianca: 160000, grupo: "Tráfico e posse ilegal" },
      { codigo: "38.1", nome: "Posse de equipamento balístico",                       meses: 40, multa: 26000,  fianca: 56000,  grupo: "Tráfico e posse ilegal" },
      { codigo: "39",   nome: "Tráfico de armas calibre médio/alto",                   meses: 60, multa: 90000,  fianca: 180000, grupo: "Tráfico e posse ilegal" },
      { codigo: "40",   nome: "Dinheiro sujo abaixo de 40.000",                        meses: 30, multa: 20000,  fianca: 62000,  grupo: "Tráfico e posse ilegal" },

      // --- ADMINISTRAÇÃO PÚBLICA ---
      { codigo: "41",   nome: "Corrupção passiva",                                     meses: 40, multa: 30000,  fianca: 80000,  grupo: "Administração pública" },
      { codigo: "41.1", nome: "Corrupção de autoridade (após desligamento)",          meses: 50, multa: 100000, fianca: 220000, grupo: "Administração pública" },
      { codigo: "42",   nome: "Corrupção ativa",                                       meses: 60, multa: 60000,  fianca: 140000, grupo: "Administração pública" },
      { codigo: "42.1", nome: "Tentativa de suborno",                                  meses: 30, multa: 30000,  fianca: 84000,  grupo: "Administração pública" },
      { codigo: "43",   nome: "Obstrução de justiça",                                  meses: 40, multa: 60000,  fianca: 128000, grupo: "Administração pública" },
      { codigo: "43.1", nome: "Omissão ou obstrução de provas",                        meses: 30, multa: 30000,  fianca: 64000,  grupo: "Administração pública" },
      { codigo: "44",   nome: "Prevaricação",                                          meses: 60, multa: 80000,  fianca: 160000, grupo: "Administração pública" },
      { codigo: "44.1", nome: "Abuso de autoridade",                                   meses: 20, multa: 24000,  fianca: 56000,  grupo: "Administração pública" },
      { codigo: "45",   nome: "Usurpação de função pública",                           meses: 60, multa: 60000,  fianca: 120000, grupo: "Administração pública" },
      { codigo: "46",   nome: "Abolição violenta do Estado Democrático de Direito",    meses: 60, multa: 50000,  fianca: 120000, grupo: "Administração pública" },
      { codigo: "47",   nome: "Associação criminosa",                                  meses: 40, multa: 18000,  fianca: 40000,  grupo: "Administração pública" },
      { codigo: "48",   nome: "Falsidade ideológica",                                  meses: 20, multa: 6000,   fianca: 18000,  grupo: "Administração pública" },
      { codigo: "49",   nome: "Impossibilidade de identificação",                      meses: 10, multa: 6000,   fianca: 12000,  grupo: "Administração pública" },
      { codigo: "50",   nome: "Falso testemunho (perjúrio)",                           meses: 40, multa: 40000,  fianca: 86000,  grupo: "Administração pública" },
      { codigo: "51",   nome: "Lei de propriedade industrial",                         meses: 60, multa: 80000,  fianca: 150000, grupo: "Administração pública" },
      { codigo: "51.1", nome: "Empresa irregular (sem alvará ou vencido)",             meses: 70, multa: 50000,  fianca: 100000, grupo: "Administração pública" },
      { codigo: "51.2", nome: "Crime contra relações de consumo",                      meses: 30, multa: 54000,  fianca: 120000, grupo: "Administração pública" },
      { codigo: "52",   nome: "Venda ilegal de produtos restritos sem licença",        meses: 25, multa: 40000,  fianca: 90000,  grupo: "Administração pública" },
      { codigo: "53",   nome: "Favorecimento pessoal",                                 meses: 40, multa: 30000,  fianca: 90000,  grupo: "Administração pública" },

      // --- ORDEM PÚBLICA ---
      { codigo: "54",   nome: "Desordem social",                                       meses: 15, multa: 5000,   fianca: 12000,  grupo: "Crimes contra a ordem pública" },
      { codigo: "54.1", nome: "Apologia ao crime",                                     meses: 30, multa: 50000,  fianca: 110000, grupo: "Crimes contra a ordem pública" },
      { codigo: "55",   nome: "Desacato",                                              meses: 20, multa: 12000,  fianca: 26000,  grupo: "Crimes contra a ordem pública" },
      { codigo: "56",   nome: "Desobediência",                                         meses: 15, multa: 10000,  fianca: 22000,  grupo: "Crimes contra a ordem pública" },
      { codigo: "57",   nome: "Resistência à prisão",                                  meses: 20, multa: 5000,   fianca: 15000,  grupo: "Crimes contra a ordem pública" },
      { codigo: "58",   nome: "Fuga de pessoa presa ou medida de segurança",          meses: 20, multa: 16000,  fianca: 38000,  grupo: "Crimes contra a ordem pública" },
      { codigo: "58.1", nome: "Fuga de abordagem policial",                            meses: 20, multa: 8000,   fianca: 20000,  grupo: "Crimes contra a ordem pública" },
      { codigo: "59",   nome: "Ocultação facial",                                      meses: 10, multa: 8000,   fianca: 18000,  grupo: "Crimes contra a ordem pública" },
      { codigo: "60",   nome: "Multas pendentes acima de 50.000",                     meses: 30, multa: 8000,   fianca: 100000, grupo: "Crimes contra a ordem pública" },
      { codigo: "61",   nome: "Poluição sonora",                                       meses: 10, multa: 6000,   fianca: 12000,  grupo: "Crimes contra a ordem pública" },
      { codigo: "62",   nome: "Não respeitar perímetro da ação",                      meses: 10, multa: 20000,  fianca: 12000,  grupo: "Crimes contra a ordem pública" },
      { codigo: "63",   nome: "Excesso de ficha criminal",                             meses: 60, multa: 10000,  fianca: 15000,  grupo: "Crimes contra a ordem pública" },

      // --- LEIS DE TRÂNSITO ---
      { codigo: "66",   nome: "Excesso de velocidade",                                 meses: 0,  multa: 8000,   fianca: 0,      grupo: "Leis de trânsito" },
      { codigo: "67",   nome: "Atropelamento",                                         meses: 10, multa: 5000,   fianca: 15000,  grupo: "Leis de trânsito" },
      { codigo: "68",   nome: "Direção perigosa",                                      meses: 10, multa: 5000,   fianca: 15000,  grupo: "Leis de trânsito" },
      { codigo: "68.1", nome: "Corrida ilegal",                                        meses: 20, multa: 14000,  fianca: 34000,  grupo: "Leis de trânsito" },
      { codigo: "69",   nome: "Veículo em local proibido (estacionar)",                meses: 0,  multa: 4000,   fianca: 0,      grupo: "Leis de trânsito" },
      { codigo: "70",   nome: "Veículo abandonado em via pública",                     meses: 0,  multa: 5000,   fianca: 0,      grupo: "Leis de trânsito" },
      { codigo: "71",   nome: "Veículo danificado (sem condições de segurança)",       meses: 0,  multa: 3000,   fianca: 0,      grupo: "Leis de trânsito" },
      { codigo: "72",   nome: "Uso de veículo de terceiros para crimes",               meses: 30, multa: 30000,  fianca: 68000,  grupo: "Leis de trânsito" },
      { codigo: "73",   nome: "Tráfego aéreo sem habilitação / plano",                 meses: 50, multa: 30000,  fianca: 80000,  grupo: "Leis de trânsito" },
      { codigo: "73.1", nome: "Pouso em local indevido",                               meses: 10, multa: 40000,  fianca: 0,      grupo: "Leis de trânsito" },
      { codigo: "73.2", nome: "Pilotagem perigosa",                                    meses: 10, multa: 50000,  fianca: 0,      grupo: "Leis de trânsito" }
    ];

    // Map auxiliar por código
    const CRIMES_POR_COD = {};
    CRIMES.forEach(c => {
      CRIMES_POR_COD[c.codigo] = c;
    });

    // =============================
    // ELEMENTOS
    // =============================

    const tabelaBody = document.getElementById("tabelaBody");
    const totalServicosSpan = document.getElementById("totalServicos");
    const totalMultaSpan = document.getElementById("totalMulta");
    const totalFiancaSpan = document.getElementById("totalFianca");
    const penaFinalSpan = document.getElementById("penaFinal");
    const resMultaSpan = document.getElementById("resMulta");
    const resFiancaSpan = document.getElementById("resFianca");
    const statusTexto = document.getElementById("statusTexto");
    const textoDiscord = document.getElementById("textoDiscord");

    const nomeInput = document.getElementById("nomeDetento");
    const cpfInput = document.getElementById("cpfDetento");
    const codigoInput = document.getElementById("codigoInput");
    const obsInput = document.getElementById("obsInput");

    const chkReuPrimario = document.getElementById("chkReuPrimario");
    const chkAdvogado = document.getElementById("chkAdvogado");
    const chkCooperacao = document.getElementById("chkCooperacao");
    const chkDelacao = document.getElementById("chkDelacao");
    const chkConfesso = document.getElementById("chkConfesso");

    const btnAdicionarManual = document.getElementById("btnAdicionarManual");
    const btnCalcular = document.getElementById("btnCalcular");
    const btnCopiar = document.getElementById("btnCopiar");

    const situacaoSelect = document.getElementById("situacaoSelect");
    const crimeSectionsDiv = document.getElementById("crimeSections");

    const statusButtons = Array.from(
      document.querySelectorAll(".btn-status")
    );

    // =============================
    // ESTADO
    // =============================
    let listaArtigos = [];
    let statusAtual = "PRISÃO";

    // =============================
    // FUNÇÕES UTILITÁRIAS
    // =============================

    function formatarMoeda(valor) {
      return valor.toLocaleString("pt-BR", {
        style: "currency",
        currency: "BRL",
        minimumFractionDigits: 2
      });
    }

    function classePelaSeveridade(meses) {
      if (meses >= 60) return "crime-gravissimo";
      if (meses >= 40) return "crime-grave";
      if (meses >= 20) return "crime-media";
      return "";
    }

    // =============================
    // RENDER DO GRID DE CRIMES
    // =============================
    function montarCrimeSections() {
      const gruposOrdem = [
        "Crimes contra a vida",
        "Crimes contra a honra",
        "Integridade física e bem-estar",
        "Crimes contra o patrimônio",
        "Tráfico e posse ilegal",
        "Administração pública",
        "Crimes contra a ordem pública",
        "Leis de trânsito"
      ];

      gruposOrdem.forEach(grupo => {
        const crimesGrupo = CRIMES.filter(c => c.grupo === grupo);
        if (!crimesGrupo.length) return;

        const section = document.createElement("div");
        section.className = "crime-section";

        const title = document.createElement("div");
        title.className = "crime-section-title";
        title.textContent = grupo.toUpperCase();
        section.appendChild(title);

        const grid = document.createElement("div");
        grid.className = "crime-grid";

        crimesGrupo.forEach(c => {
          const card = document.createElement("button");
          card.type = "button";
          card.className = "crime-card " + classePelaSeveridade(c.meses);
          card.dataset.codigo = c.codigo;

          card.innerHTML =
            '<div class="crime-artigo">Art. ' +
            c.codigo +
            "</div>" +
            '<div>' +
            c.nome +
            "</div>" +
            '<small>' +
            (c.meses > 0 ? "Serviços: " + c.meses + " • " : "") +
            "Multa: " +
            formatarMoeda(c.multa) +
            (c.fianca > 0 ? " • Fiança: " + formatarMoeda(c.fianca) : "") +
            "</small>";

          card.addEventListener("click", () => {
            adicionarPorCodigo(c.codigo);
          });

          grid.appendChild(card);
        });

        section.appendChild(grid);
        crimeSectionsDiv.appendChild(section);
      });
    }

    // =============================
    // GERENCIAMENTO DE ARTIGOS
    // =============================

    function adicionarArtigo(crime, observacaoExtra) {
      if (!crime) return;

      let descricao =
        "Art. " + crime.codigo + " - " + crime.nome;

      if (observacaoExtra) {
        descricao += " (" + observacaoExtra + ")";
      }

      listaArtigos.push({
        codigo: crime.codigo,
        descricao: descricao,
        servicos: crime.meses,
        multa: crime.multa,
        fianca: crime.fianca
      });

      renderTabela();
      atualizarTotais();
    }

    function adicionarPorCodigo(codigoStr) {
      const crime = CRIMES_POR_COD[codigoStr.trim()];
      if (!crime) {
        alert("Artigo " + codigoStr + " não encontrado na tabela.");
        return;
      }
      const extra = obsInput.value.trim();
      adicionarArtigo(crime, extra);
      obsInput.value = "";
    }

    function removerArtigo(index) {
      listaArtigos.splice(index, 1);
      renderTabela();
      atualizarTotais();
    }

    function renderTabela() {
      tabelaBody.innerHTML = "";
      listaArtigos.forEach((item, index) => {
        const tr = document.createElement("tr");

        const tdCod = document.createElement("td");
        tdCod.textContent = item.codigo;
        tr.appendChild(tdCod);

        const tdDesc = document.createElement("td");
        tdDesc.textContent = item.descricao;
        tr.appendChild(tdDesc);

        const tdServ = document.createElement("td");
        tdServ.textContent = item.servicos;
        tr.appendChild(tdServ);

        const tdMulta = document.createElement("td");
        tdMulta.textContent = formatarMoeda(item.multa);
        tr.appendChild(tdMulta);

        const tdFianca = document.createElement("td");
        tdFianca.textContent = formatarMoeda(item.fianca);
        tr.appendChild(tdFianca);

        const tdAcoes = document.createElement("td");
        const btn = document.createElement("button");
        btn.textContent = "X";
        btn.className = "btn-status";
        btn.style.padding = "3px 8px";
        btn.style.fontSize = "10px";
        btn.addEventListener("click", () => removerArtigo(index));
        tdAcoes.appendChild(btn);
        tr.appendChild(tdAcoes);

        tabelaBody.appendChild(tr);
      });
    }

    function atualizarTotais() {
      const totalServ = listaArtigos.reduce((s, a) => s + a.servicos, 0);
      const totalMulta = listaArtigos.reduce((s, a) => s + a.multa, 0);
      const totalFianca = listaArtigos.reduce((s, a) => s + a.fianca, 0);

      totalServicosSpan.textContent = totalServ;
      totalMultaSpan.textContent = formatarMoeda(totalMulta);
      totalFiancaSpan.textContent = formatarMoeda(totalFianca);
    }

    // =============================
    // CÁLCULO DA PENA
    // =============================

    function calcularPena() {
      if (!listaArtigos.length) {
        alert("Adicione pelo menos um artigo antes de calcular.");
        return;
      }

      const totalServ = listaArtigos.reduce((s, a) => s + a.servicos, 0);
      const totalMulta = listaArtigos.reduce((s, a) => s + a.multa, 0);
      const totalFianca = listaArtigos.reduce((s, a) => s + a.fianca, 0);

      let pena = totalServ;

      if (chkReuPrimario.checked) pena *= 0.7;     // -30%
      if (chkAdvogado.checked)    pena *= 0.7;     // -30%
      if (chkCooperacao.checked)  pena *= 0.9;     // -10%
      if (chkDelacao.checked)     pena *= 0.5;     // -50%
      if (chkConfesso.checked)    pena *= 0.85;    // -15%

      pena = Math.round(pena);
      if (pena < 0) pena = 0;

      // Atualiza blocos de resultado
      penaFinalSpan.textContent = pena;
      resMultaSpan.textContent = formatarMoeda(totalMulta);
      resFiancaSpan.textContent = formatarMoeda(totalFianca);

      // Status simples
      let status;
      if (statusAtual === "MULTAR") {
        status = "Situação de multa aplicada.";
      } else if (totalFianca > 0 && pena <= 20 && statusAtual === "LIBERDADE") {
        status =
          "Pena baixa com possibilidade de liberdade mediante pagamento da fiança.";
      } else if (pena <= 25) {
        status = "Pena moderada. Avaliar possibilidade de acordo.";
      } else {
        status = "Pena alta. Cumprimento integral recomendado.";
      }

      statusTexto.textContent = status;

      gerarTextoDiscord(pena, totalMulta, totalFianca);
    }

    // =============================
    // TEXTO PARA DISCORD
    // =============================

    function gerarTextoDiscord(penaMeses, totalMulta, totalFianca) {
      const nome = nomeInput.value.trim() || "Não informado";
      const cpf = cpfInput.value.trim() || "Não informado";

      const codigos = listaArtigos.map(a => a.codigo).join(", ") || "Nenhum";

      const situacao = situacaoSelect.value;

      let titulo = statusAtual;

      const linhas = [];
      linhas.push(titulo);
      linhas.push("Situação: " + situacao);
      linhas.push("------------------------------");
      linhas.push("Nome: " + nome);
      linhas.push("CPF: " + cpf);
      linhas.push("Artigos: " + codigos);
      linhas.push("Pena: " + penaMeses + " meses");
      linhas.push("Multa: " + formatarMoeda(totalMulta));
      linhas.push("Fiança: " + formatarMoeda(totalFianca));
      linhas.push("------------------------------");

      textoDiscord.value = linhas.join("\n");
    }

    // =============================
    // EVENTOS
    // =============================

    btnAdicionarManual.addEventListener("click", () => {
      const valor = codigoInput.value.trim();
      if (!valor) {
        alert("Digite pelo menos um código de artigo.");
        return;
      }

      const partes = valor.split(",");
      partes.forEach(cod => {
        const limpo = cod.trim();
        if (!limpo) return;
        adicionarPorCodigo(limpo);
      });

      codigoInput.value = "";
    });

    btnCalcular.addEventListener("click", calcularPena);

    codigoInput.addEventListener("keyup", e => {
      if (e.key === "Enter") btnAdicionarManual.click();
    });

    statusButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        statusButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        statusAtual = btn.dataset.status;
        // Regera texto se já tiver cálculo
        const pena = Number(penaFinalSpan.textContent) || 0;
        const totalMulta = listaArtigos.reduce((s, a) => s + a.multa, 0);
        const totalFianca = listaArtigos.reduce((s, a) => s + a.fianca, 0);
        if (listaArtigos.length) {
          gerarTextoDiscord(pena, totalMulta, totalFianca);
        }
      });
    });

    situacaoSelect.addEventListener("change", () => {
      const pena = Number(penaFinalSpan.textContent) || 0;
      const totalMulta = listaArtigos.reduce((s, a) => s + a.multa, 0);
      const totalFianca = listaArtigos.reduce((s, a) => s + a.fianca, 0);
      if (listaArtigos.length) {
        gerarTextoDiscord(pena, totalMulta, totalFianca);
      }
    });

    btnCopiar.addEventListener("click", () => {
      textoDiscord.select();
      document.execCommand("copy");
      btnCopiar.textContent = "Copiado!";
      setTimeout(() => {
        btnCopiar.textContent = "Copiar texto";
      }, 1200);
    });

    // Monta grid de crimes ao carregar
    montarCrimeSections();
  </script>
</body>
</html>
